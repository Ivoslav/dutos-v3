<div class="modal-header">
    <h5 class="modal-title">üìÇ {{ soldier.rank_title }} {{ soldier.last_name }}</h5>
    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
</div>

<div class="modal-body">
    <div class="row">
        <div class="col-md-5 border-end">
            <p><strong>–ù–æ–º–µ—Ä:</strong> {{ soldier.faculty_number }}</p>
            <p><strong>–¢–æ—á–∫–∏:</strong> <span class="badge bg-primary">{{ soldier.score }}</span></p>
            <p><strong>–í–∑–≤–æ–¥:</strong> {{ soldier.platoon }}</p>

            {% if leaves %}
            <div class="alert alert-warning p-2 mt-2" style="font-size: 0.85rem;">
                <strong>üèñÔ∏è –û—Ç—Å—ä—Å—Ç–≤–∏—è:</strong>
                <ul class="mb-0 ps-3">
                {% for l in leaves %}
                    <li>{{ l.get_leave_type_display }}: {{ l.start_date|date:"d.m" }} - {{ l.end_date|date:"d.m" }}</li>
                {% endfor %}
                </ul>
            </div>
            {% endif %}
            
            <hr>
            <h6>‚ûï –†—ä—á–Ω–æ –¥–æ–±–∞–≤—è–Ω–µ</h6>
            
            {% if form.errors %}
                <div class="alert alert-danger p-2" style="font-size: 0.85rem;">
                    {% for field, errors in form.errors.items %}
                        {{ errors|striptags }}
                    {% endfor %}
                </div>
            {% endif %}

            <form id="dutyForm" method="post" action="{% url 'soldier_profile' soldier.id %}">
                {% csrf_token %}
                <div class="mb-2">
                    <label>–î–∞—Ç–∞:</label>
                    {{ form.date }}
                </div>
                <div class="mb-2">
                    <label>–ù–∞—Ä—è–¥:</label>
                    {{ form.duty_type }}
                </div>
                <button type="submit" class="btn btn-success btn-sm w-100">–ó–∞–ø–∏—à–∏ –Ω–∞—Ä—è–¥</button>
            </form>
        </div>

        <div class="col-md-7">
            
            <h6 class="text-primary">üìÖ –ü—Ä–µ–¥—Å—Ç–æ—è—â–∏ –Ω–∞—Ä—è–¥–∏</h6>
            <div class="mb-3 border rounded p-2 bg-light">
                {% if upcoming_shifts %}
                    <table class="table table-sm table-borderless mb-0">
                        {% for shift in upcoming_shifts %}
                            <tr>
                                <td class="fw-bold">{{ shift.date|date:"d.m.Y" }}</td>
                                <td>{{ shift.duty_type.name }}</td>
                            </tr>
                        {% endfor %}
                    </table>
                {% else %}
                    <small class="text-muted">–ù—è–º–∞ –ø–ª–∞–Ω–∏—Ä–∞–Ω–∏.</small>
                {% endif %}
            </div>

            <h6 class="text-secondary">üìú –ò—Å—Ç–æ—Ä–∏—è</h6>
            <div style="max-height: 200px; overflow-y: auto;">
                <table class="table table-sm table-striped">
                    <thead><tr><th>–î–∞—Ç–∞</th><th>–ù–∞—Ä—è–¥</th></tr></thead>
                    <tbody>
                    {% for shift in past_shifts %}
                        <tr>
                            <td>{{ shift.date|date:"d.m.Y" }}</td>
                            <td>{{ shift.duty_type.name }}</td>
                        </tr>
                    {% empty %}
                        <tr><td colspan="2" class="text-muted">–ù—è–º–∞ –∑–∞–ø–∏—Å–∏.</td></tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>