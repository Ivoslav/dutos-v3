<div class="modal-header bg-light">
    <h5 class="modal-title" id="soldierModalLabel">
        üë§ –î–æ—Å–∏–µ: {{ soldier.rank_title }} {{ soldier.last_name }}
    </h5>
    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
</div>

<div class="modal-body">
    
    <div class="d-flex justify-content-between align-items-center mb-4 p-3 bg-white border rounded shadow-sm">
        <div>
            <div class="text-muted small">–§–∞–∫—É–ª—Ç–µ—Ç–µ–Ω ‚Ññ / –í–∑–≤–æ–¥</div>
            <strong>{{ soldier.faculty_number }} | {{ soldier.platoon }} –≤–∑–≤–æ–¥</strong>
        </div>
        <div class="text-end">
            <div class="text-muted small">–ù–∞—Ç–æ–≤–∞—Ä–µ–Ω–æ—Å—Ç</div>
            <span class="badge bg-primary fs-5">{{ soldier.score }} —Ç–æ—á–∫–∏</span>
        </div>
    </div>

    <div class="card mb-4 border-primary">
        <div class="card-header bg-primary text-white py-1">‚ûï –ù–∞–∑–Ω–∞—á–∏ –Ω–∞—Ä—è–¥</div>
        <div class="card-body bg-light">
            <form id="dutyForm" method="post" action="{% url 'soldier_profile' soldier.id %}" class="row g-2 align-items-end">
                {% csrf_token %}
                
                {% if form.date.errors %}
                    <div class="col-12 text-danger fw-bold small mb-2">
                        {{ form.date.errors.0 }}
                    </div>
                {% endif %}

                <div class="col-6">
                    <label class="small text-muted">–î–∞—Ç–∞:</label>
                    {{ form.date }} </div>
                <div class="col-6">
                    <label class="small text-muted">–í–∏–¥ –Ω–∞—Ä—è–¥:</label>
                    {{ form.duty_type }}
                </div>
                <div class="col-12 mt-2">
                    <button type="submit" class="btn btn-primary btn-sm w-100">–ó–∞–ø–∏—à–∏</button>
                </div>
            </form>
        </div>
    </div>

    {% if leaves %}
    <h6 class="text-warning border-bottom border-warning pb-1">‚ö†Ô∏è –û—Ç–ø—É—Å–∫–∏ –∏ –ë–æ–ª–Ω–∏—á–Ω–∏</h6>
    <ul class="list-group list-group-flush mb-3 small">
        {% for leave in leaves %}
            <li class="list-group-item d-flex justify-content-between align-items-center bg-warning bg-opacity-10">
                <span>
                    {% if leave.leave_type == 'sick' %}ü§í –ë–æ–ª–Ω–∏—á–µ–Ω{% else %}üè† –û—Ç–ø—É—Å–∫{% endif %}
                    <span class="text-muted">({{ leave.start_date|date:"d.m" }} - {{ leave.end_date|date:"d.m" }})</span>
                </span>
            </li>
        {% endfor %} </ul>
    {% endif %}

    <h6 class="text-primary border-bottom border-primary pb-1">üìÖ –ü—Ä–µ–¥—Å—Ç–æ—è—â–∏ –Ω–∞—Ä—è–¥–∏</h6>
    {% if upcoming_shifts %}
        <ul class="list-group list-group-flush mb-3 small">
            {% for shift in upcoming_shifts %}
            <li class="list-group-item d-flex justify-content-between">
                <strong>{{ shift.date|date:"d.m.Y" }} ({{ shift.date|date:"l" }})</strong>
                <span class="badge bg-primary">{{ shift.duty_type.name }}</span>
            </li>
            {% endfor %} </ul>
    {% else %}
        <p class="text-muted small mb-3">–ù—è–º–∞ –ø–ª–∞–Ω–∏—Ä–∞–Ω–∏ –Ω–∞—Ä—è–¥–∏.</p>
    {% endif %}

    <h6 class="text-secondary border-bottom pb-1 mt-4">clock –ò—Å—Ç–æ—Ä–∏—è (–ü–æ—Å–ª–µ–¥–Ω–∏ 5)</h6>
    {% if past_shifts %}
        <ul class="list-group list-group-flush small text-muted">
            {% for shift in past_shifts|slice:":5" %}
            <li class="list-group-item d-flex justify-content-between bg-light">
                <span>{{ shift.date|date:"d.m.Y" }}</span>
                <span>{{ shift.duty_type.name }}</span>
            </li>
            {% endfor %} </ul>
    {% else %}
        <p class="text-muted small">–ù—è–º–∞ –∏—Å—Ç–æ—Ä–∏—è.</p>
    {% endif %}

</div>

<div class="modal-footer bg-light p-1">
    <button type="button" class="btn btn-secondary btn-sm" data-bs-dismiss="modal">–ó–∞—Ç–≤–æ—Ä–∏</button>
</div>